<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

<style>
  body{text-align: center;background-color: aqua;}
  .a{height: 100px;width: 100px;background-color: rgb(34, 239, 157);border: none;border-radius: 100px;cursor: pointer;}
  .a img {height:75px ;}

</style>
</head>
<body>
  <div class="container">
    <h1>Bat Ball and Stump Game</h1>
    <div class="btn">
      <button class="a" id="one" onclick="userchoice ='bat';computerchoice = choice() ;
      
       resultMsg = getResult('bat',computerchoice)

       finalResult(userchoice,computerchoice,resultMsg)
      ";><img src="bat.png" alt=""></button>


      <button class="a" id="two" onclick="userchoice = 'ball';computerchoice = choice();

       resultMsg = getResult('ball',computerchoice)
 
      finalResult(userchoice,computerchoice,resultMsg)
      
      " ><img src="ball.png" alt=""></button>


      <button class="a" id="three" onclick="userchoice = 'stump';
      computerchoice = choice();

    resultMsg = getResult('stump',computerchoice) 
      
    finalResult(userchoice,computerchoice,resultMsg)
      
      "><img src="stump.png" alt=""></button>
    </div>
  </div>
  <div id="text">
    <h1 id="userchoice"></h1>
    <h1 id="compchoice"></h1>
    <h1 id="result"></h1>
    <h1 id="score"></h1>
    <button class="a" onclick="localStorage.clear();resetScore(); finalResult() ">
      Reset 
    </button>
</div>
  <script>
  
 let scoreboard = {
    Win:0,
    lose:0,
    tie:0,
  }

   let scoreStr = localStorage.getItem('scoreboard')


   //  if(scoreStr !== undefined){
   //        scoreboard = JSON.parse(scoreStr)
   //  }  else {
   //   scoreboard = {
   //         Win:0,
   //         lose:0,
   //         tie:0,
   //   }
   //  }
   function resetScore() {
    
    scoreboard =  {
          Win:0,
          lose:0,
          tie:0,
     }

 

  scoreboard.displayScore = function(){
      return `won:${scoreboard.Win}  lost:${scoreboard.lose}  tied:${scoreboard.tie}`
    };
   }
     scoreboard = scoreStr !== null ? JSON.parse(scoreStr) :  {
          Win:0,
          lose:0,
          tie:0,
     }
  
 

  scoreboard.displayScore = function(){
      return `won:${scoreboard.Win}  lost:${scoreboard.lose}  tied:${scoreboard.tie}`
    };

   let userchoice;
   let randomnumber;
   let resultMsg;
   function choice(){
      randomnumber = Math.random() * 3;
   if (randomnumber <= 1)
   {
    return 'bat'
    console.log(`Computer choice is bat. `)
   }
   else if(randomnumber <= 2)
   {
    return 'ball';console.log(`Computer choice is ball.`);
   }
   else
   {
   return 'stump';console.log(`Computer choice is stump.`);
   };

   }

   function getResult(userchoice,computerchoice){
    if (userchoice === 'bat'){
       if(computerchoice === 'bat'){

        scoreboard.tie ++;
        return 'Its a tie' ;
       }
       else if(computerchoice === 'ball'){
        scoreboard.Win ++;
        return 'You Won'
       }
       else{
        scoreboard.lose ++;
        return 'You Lost'
       }
    }
    else if(userchoice === 'ball') {
       if(computerchoice === 'bat'){
        scoreboard.lose ++ ;
        return 'You Lost'
       }
       else if(computerchoice === 'ball'){
        scoreboard.tie ++ ;
        return 'Its a tie' 
       }
       else {
        scoreboard.Win ++;
        return 'You Won' 
       }
    }
    else {
      if(computerchoice ==='bat'){
        scoreboard.Win ++;
        return 'You Won'
      }
      else if(computerchoice === 'ball'){
        scoreboard.lose ++ ;
        return 'You Lost'
      }
      else{
        scoreboard.tie ++ ;
        return 'Its a tie' 
      }
    }
  }
  
   function finalResult(userchoice,computerchoice,resultMsg){

    localStorage.setItem('scoreboard',JSON.stringify(scoreboard))
  //   alert(`
  //   user choice is ${userchoice}
  //   computer choice is ${computerchoice}
  //   ${resultMsg}.
  //   ${scoreboard.displayScore()}
  //  `);

   document.querySelector('#userchoice').innerHTML = userchoice ? `Your Choice : ${userchoice}` : '';
   document.querySelector('#compchoice').innerHTML = computerchoice ? `computer's choice : ${computerchoice}` : '';
   document.querySelector('#result').innerHTML = resultMsg || '';
   document.querySelector('#score').innerHTML = scoreboard.displayScore();







   }
                    
  </script>
</body>
</html>